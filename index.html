<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Youssef & Ameni Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: #f0f2f5;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 15px;
        }

        .container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            width: 100%;
            max-width: 400px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
            color: #333;
            font-size: 24px;
        }

        .section {
            background: #f8f9fa;
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
        }

        .section h3 {
            margin-bottom: 15px;
            color: #333;
        }

        .section input {
            width: 100%;
            padding: 15px;
            font-size: 20px;
            text-align: center;
            border: 2px solid #ddd;
            border-radius: 8px;
            margin: 10px 0;
        }

        .player-buttons {
            display: flex;
            gap: 10px;
            margin: 15px 0;
        }

        .player-choice {
            flex: 1;
            padding: 20px;
            font-size: 22px;
            font-weight: bold;
            border: 3px solid;
            background: white;
            border-radius: 10px;
            cursor: pointer;
        }

        .player-choice.youssef {
            color: #2196F3;
            border-color: #2196F3;
        }

        .player-choice.youssef:hover {
            background: #2196F3;
            color: white;
        }

        .player-choice.ameni {
            color: #E91E63;
            border-color: #E91E63;
        }

        .player-choice.ameni:hover {
            background: #E91E63;
            color: white;
        }

        .code-box {
            background: #333;
            color: white;
            font-size: 40px;
            font-weight: bold;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
            letter-spacing: 5px;
        }

        button {
            width: 100%;
            padding: 15px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            margin: 5px 0;
        }

        button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        button.reset {
            background: #f44336;
        }

        .waiting-box {
            background: #fff3cd;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            color: #856404;
            margin: 20px 0;
            font-size: 18px;
        }

        .turn-box {
            text-align: center;
            font-size: 18px;
            padding: 15px;
            background: #e8f5e9;
            border-radius: 8px;
            margin: 10px 0;
            font-weight: bold;
        }

        .guess-box {
            background: #f8f9fa;
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
        }

        .guess-box input {
            width: 100%;
            padding: 15px;
            font-size: 24px;
            text-align: center;
            border: 2px solid #ddd;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .hint-box {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-size: 20px;
            margin: 15px 0;
            font-weight: bold;
        }

        .history-box {
            background: #f8f9fa;
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 15px;
            max-height: 200px;
            overflow-y: auto;
            margin-top: 15px;
        }

        .history-item {
            padding: 8px;
            border-bottom: 1px solid #eee;
        }

        .winner-box {
            background: #4CAF50;
            color: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            font-size: 28px;
            margin: 20px 0;
            font-weight: bold;
        }

        .hidden {
            display: none;
        }

        .status {
            font-size: 14px;
            color: #666;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéÆ YOUSSEF ü§ù AMENI</h1>

        <!-- Enter Code -->
        <div id="enterCodeScreen">
            <div class="section">
                <h3>ENTER GAME CODE</h3>
                <input type="text" id="gameCode" placeholder="Code (ex: 1234)" value="1234">
                <button onclick="enterCode()">JOIN GAME</button>
                <p class="status">Use same code on both phones</p>
            </div>
        </div>

        <!-- Choose Player -->
        <div id="choosePlayerScreen" class="hidden">
            <div class="section">
                <h3>WHO ARE YOU?</h3>
                <div class="player-buttons">
                    <button class="player-choice youssef" onclick="setPlayer('youssef')">YOUSSEF</button>
                    <button class="player-choice ameni" onclick="setPlayer('ameni')">AMENI</button>
                </div>
                <div class="code-box" id="codeDisplay">1234</div>
                <p class="status">Share this code with the other person</p>
            </div>
        </div>

        <!-- Youssef's Screen -->
        <div id="youssefScreen" class="hidden">
            <!-- Lock Number -->
            <div id="youssefLock" class="section">
                <h3>üë§ YOUSSEF</h3>
                <p style="margin-bottom: 15px;">Choose your secret number</p>
                <input type="number" id="youssefSecret" min="1" max="100" placeholder="1-100">
                <button onclick="lockNumber('youssef')">LOCK NUMBER</button>
            </div>

            <!-- Waiting -->
            <div id="youssefWaiting" class="waiting-box hidden">
                ‚è≥ Waiting for Ameni to lock her number...
            </div>

            <!-- Game -->
            <div id="youssefGame" class="hidden">
                <div class="turn-box" id="youssefTurn">Loading...</div>
                
                <div class="guess-box">
                    <h3 style="margin-bottom: 10px;">Guess Ameni's number</h3>
                    <input type="number" id="youssefGuess" min="1" max="100" placeholder="Your guess">
                    <button onclick="makeGuess('youssef')" id="youssefBtn" disabled>GUESS</button>
                </div>

                <div id="youssefHint" class="hint-box hidden"></div>

                <div class="history-box">
                    <h4 style="margin-bottom: 10px;">üìù History</h4>
                    <div id="youssefHistory"></div>
                </div>
            </div>
        </div>

        <!-- Ameni's Screen -->
        <div id="ameniScreen" class="hidden">
            <!-- Lock Number -->
            <div id="ameniLock" class="section">
                <h3>üë§ AMENI</h3>
                <p style="margin-bottom: 15px;">Choose your secret number</p>
                <input type="number" id="ameniSecret" min="1" max="100" placeholder="1-100">
                <button onclick="lockNumber('ameni')">LOCK NUMBER</button>
            </div>

            <!-- Waiting -->
            <div id="ameniWaiting" class="waiting-box hidden">
                ‚è≥ Waiting for Youssef to lock his number...
            </div>

            <!-- Game -->
            <div id="ameniGame" class="hidden">
                <div class="turn-box" id="ameniTurn">Loading...</div>
                
                <div class="guess-box">
                    <h3 style="margin-bottom: 10px;">Guess Youssef's number</h3>
                    <input type="number" id="ameniGuess" min="1" max="100" placeholder="Your guess">
                    <button onclick="makeGuess('ameni')" id="ameniBtn" disabled>GUESS</button>
                </div>

                <div id="ameniHint" class="hint-box hidden"></div>

                <div class="history-box">
                    <h4 style="margin-bottom: 10px;">üìù History</h4>
                    <div id="ameniHistory"></div>
                </div>
            </div>
        </div>

        <!-- Winner -->
        <div id="winnerScreen" class="winner-box hidden"></div>

        <!-- Reset -->
        <button class="reset" onclick="resetGame()" style="margin-top: 20px;">üîÑ NEW GAME</button>
    </div>

    <script>
        let currentPlayer = null;
        let gameCode = null;

        // Get game data from localStorage
        function getGame() {
            if (!gameCode) return null;
            let data = localStorage.getItem('game_' + gameCode);
            return data ? JSON.parse(data) : null;
        }

        // Save game data
        function saveGame(gameData) {
            if (!gameCode) return;
            localStorage.setItem('game_' + gameCode, JSON.stringify(gameData));
        }

        // Enter code
        function enterCode() {
            let code = document.getElementById('gameCode').value;
            if (code) {
                gameCode = code;
                document.getElementById('codeDisplay').innerText = code;
                document.getElementById('enterCodeScreen').classList.add('hidden');
                document.getElementById('choosePlayerScreen').classList.remove('hidden');
                
                // Create game if it doesn't exist
                let game = getGame();
                if (!game) {
                    game = {
                        secretY: null,
                        secretA: null,
                        youssefLocked: false,
                        ameniLocked: false,
                        turn: 'youssef',
                        winner: null,
                        guesses: []
                    };
                    saveGame(game);
                }
            }
        }

        // Set player
        function setPlayer(player) {
            currentPlayer = player;
            document.getElementById('choosePlayerScreen').classList.add('hidden');
            
            if (player === 'youssef') {
                document.getElementById('youssefScreen').classList.remove('hidden');
            } else {
                document.getElementById('ameniScreen').classList.remove('hidden');
            }
            
            updateScreen();
        }

        // Lock number
        function lockNumber(player) {
            let game = getGame();
            if (!game) return;

            if (player === 'youssef') {
                let num = parseInt(document.getElementById('youssefSecret').value);
                if (num >= 1 && num <= 100) {
                    game.secretY = num;
                    game.youssefLocked = true;
                    saveGame(game);
                    
                    document.getElementById('youssefLock').classList.add('hidden');
                    document.getElementById('youssefWaiting').classList.remove('hidden');
                } else {
                    alert('Number must be 1-100');
                }
            } else {
                let num = parseInt(document.getElementById('ameniSecret').value);
                if (num >= 1 && num <= 100) {
                    game.secretA = num;
                    game.ameniLocked = true;
                    saveGame(game);
                    
                    document.getElementById('ameniLock').classList.add('hidden');
                    document.getElementById('ameniWaiting').classList.remove('hidden');
                } else {
                    alert('Number must be 1-100');
                }
            }

            checkGameStart();
        }

        // Check if both locked
        function checkGameStart() {
            let game = getGame();
            if (!game) return;

            if (game.youssefLocked && game.ameniLocked) {
                game.turn = 'youssef';
                saveGame(game);
                
                if (currentPlayer === 'youssef') {
                    document.getElementById('youssefWaiting').classList.add('hidden');
                    document.getElementById('youssefGame').classList.remove('hidden');
                } else {
                    document.getElementById('ameniWaiting').classList.add('hidden');
                    document.getElementById('ameniGame').classList.remove('hidden');
                }
            }
        }

        // Make guess
        function makeGuess(player) {
            let game = getGame();
            if (!game || game.winner) return;
            if (game.turn !== player) return;

            let guess;
            if (player === 'youssef') {
                guess = parseInt(document.getElementById('youssefGuess').value);
                if (!guess || guess < 1 || guess > 100) {
                    alert('Enter 1-100');
                    return;
                }

                // Check guess
                if (guess === game.secretA) {
                    game.winner = 'youssef';
                } else {
                    game.turn = 'ameni';
                }

                // Add to history
                game.guesses.push({
                    player: 'youssef',
                    guess: guess,
                    correct: guess === game.secretA
                });

                document.getElementById('youssefGuess').value = '';
            } else {
                guess = parseInt(document.getElementById('ameniGuess').value);
                if (!guess || guess < 1 || guess > 100) {
                    alert('Enter 1-100');
                    return;
                }

                // Check guess
                if (guess === game.secretY) {
                    game.winner = 'ameni';
                } else {
                    game.turn = 'youssef';
                }

                // Add to history
                game.guesses.push({
                    player: 'ameni',
                    guess: guess,
                    correct: guess === game.secretY
                });

                document.getElementById('ameniGuess').value = '';
            }

            saveGame(game);
            updateScreen();

            if (game.winner) {
                showWinner();
            }
        }

        // Update screen
        function updateScreen() {
            let game = getGame();
            if (!game) return;

            if (currentPlayer === 'youssef') {
                // Update Youssef's screen
                if (!game.winner) {
                    let turnEl = document.getElementById('youssefTurn');
                    let btn = document.getElementById('youssefBtn');
                    let hintEl = document.getElementById('youssefHint');
                    
                    if (game.turn === 'youssef') {
                        turnEl.innerText = 'üéÆ YOUR TURN - Guess Ameni\'s number';
                        btn.disabled = false;
                        hintEl.classList.add('hidden');
                    } else {
                        turnEl.innerText = '‚è≥ AMENI\'S TURN - Waiting...';
                        btn.disabled = true;
                        
                        // Show last hint if available
                        if (game.guesses.length > 0) {
                            let last = game.guesses[game.guesses.length - 1];
                            if (last.player === 'youssef') {
                                let target = game.secretA;
                                let hint = last.guess < target ? '‚¨ÜÔ∏è HIGHER' : '‚¨áÔ∏è LOWER';
                                hintEl.innerText = hint;
                                hintEl.classList.remove('hidden');
                            }
                        }
                    }
                }

                // Update history
                let historyHtml = '';
                game.guesses.slice().reverse().forEach(g => {
                    let hint = '';
                    if (g.player === 'youssef' && !g.correct) {
                        let target = game.secretA;
                        hint = g.guess < target ? ' ‚¨ÜÔ∏è' : ' ‚¨áÔ∏è';
                    } else if (g.player === 'ameni' && !g.correct) {
                        let target = game.secretY;
                        hint = g.guess < target ? ' ‚¨ÜÔ∏è' : ' ‚¨áÔ∏è';
                    }
                    historyHtml += `<div class="history-item">${g.player === 'youssef' ? 'You' : 'Ameni'}: ${g.guess}${g.correct ? ' ‚úÖ' : hint}</div>`;
                });
                if (historyHtml === '') {
                    historyHtml = '<div class="history-item">No guesses yet</div>';
                }
                document.getElementById('youssefHistory').innerHTML = historyHtml;

            } else if (currentPlayer === 'ameni') {
                // Update Ameni's screen
                if (!game.winner) {
                    let turnEl = document.getElementById('ameniTurn');
                    let btn = document.getElementById('ameniBtn');
                    let hintEl = document.getElementById('ameniHint');
                    
                    if (game.turn === 'ameni') {
                        turnEl.innerText = 'üéÆ YOUR TURN - Guess Youssef\'s number';
                        btn.disabled = false;
                        hintEl.classList.add('hidden');
                    } else {
                        turnEl.innerText = '‚è≥ YOUSSEF\'S TURN - Waiting...';
                        btn.disabled = true;
                        
                        // Show last hint if available
                        if (game.guesses.length > 0) {
                            let last = game.guesses[game.guesses.length - 1];
                            if (last.player === 'ameni') {
                                let target = game.secretY;
                                let hint = last.guess < target ? '‚¨ÜÔ∏è HIGHER' : '‚¨áÔ∏è LOWER';
                                hintEl.innerText = hint;
                                hintEl.classList.remove('hidden');
                            }
                        }
                    }
                }

                // Update history
                let historyHtml = '';
                game.guesses.slice().reverse().forEach(g => {
                    let hint = '';
                    if (g.player === 'ameni' && !g.correct) {
                        let target = game.secretY;
                        hint = g.guess < target ? ' ‚¨ÜÔ∏è' : ' ‚¨áÔ∏è';
                    } else if (g.player === 'youssef' && !g.correct) {
                        let target = game.secretA;
                        hint = g.guess < target ? ' ‚¨ÜÔ∏è' : ' ‚¨áÔ∏è';
                    }
                    historyHtml += `<div class="history-item">${g.player === 'ameni' ? 'You' : 'Youssef'}: ${g.guess}${g.correct ? ' ‚úÖ' : hint}</div>`;
                });
                if (historyHtml === '') {
                    historyHtml = '<div class="history-item">No guesses yet</div>';
                }
                document.getElementById('ameniHistory').innerHTML = historyHtml;
            }
        }

        // Show winner
        function showWinner() {
            let game = getGame();
            if (!game) return;

            let winnerDiv = document.getElementById('winnerScreen');
            winnerDiv.classList.remove('hidden');
            
            if (game.winner === 'youssef') {
                winnerDiv.innerText = 'üèÜ YOUSSEF WINS! üèÜ';
            } else {
                winnerDiv.innerText = 'üèÜ AMENI WINS! üèÜ';
            }

            if (currentPlayer === 'youssef') {
                document.getElementById('youssefBtn').disabled = true;
            } else {
                document.getElementById('ameniBtn').disabled = true;
            }
        }

        // Reset game
        function resetGame() {
            if (gameCode) {
                localStorage.removeItem('game_' + gameCode);
            }
            location.reload();
        }

        // Check for updates every second
        setInterval(() => {
            if (currentPlayer) {
                updateScreen();
                checkGameStart();
            }
        }, 1000);

        // Initial update
        updateScreen();
    </script>
</body>
</html>
